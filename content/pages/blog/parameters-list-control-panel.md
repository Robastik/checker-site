---
type: PostLayout
title: Работа с листом Параметры
date: '2024-09-25'
author: content/data/person1.json
excerpt: >-
  Панель управления чекера - это та гугл-таблица, которую нужно скопировать в
  самом начале. На листах этой гугл-таблицы расположено все управление чекером →
featuredImage:
  type: ImageBlock
  url: /images/control-panel-list-parameters.jpeg
  altText: Работа с листом Параметры
  elementId: ''
  styles:
    self:
      padding:
        - pt-0
        - pl-0
        - pb-0
        - pr-0
bottomSections: []
slug: /parameters-list-control-panel
isFeatured: false
isDraft: false
seo:
  type: Seo
  metaTitle: Работа с листом Параметры
  metaDescription: Настройка и ручной запуск выгрузок
  addTitleSuffix: false
  socialImage: /images/control-panel-list-parameters.jpeg
  metaTags: []
colors: bg-light-fg-dark
styles:
  self:
    flexDirection: col
---
Лист *Параметры* выполняет две основные задачи: настройка выгрузок и ручной запуск выгрузок.

### Функции

Функция - это гугл-скрипт, который делает выгрузку.

Функции реализуют методы API. Для детального понимания того, что делает функция, нужно обратиться к описанию метода API, указанного в описании функции.

Например: В разделе *WB* (на листе *Параметры)* первой идет функция *getListNomenclature*. В ее описании указан метод **Контент → Просмотр → Список номенклатур (НМ)**. Открываем [старую документацию API WB](https://openapi.wildberries.ru/), в меню сверху открываем **Контент**, в меню слева открываем **Просмотр** и выбираем метод **Список номенклатур (НМ)**.

В [новой документации API WB](https://dev.wildberries.ru/) **Контент** расположен под заголовком **Работа с товарами**, далее - **Номенклатуры** и затем **Список номенклатур**.

Поскольку ВБ постоянно делает огромное количество изменений, описание функций может не вполне соответствовать текущему расположению описаний методов. Если что-то не удается найти, свяжитесь с нами и вместе мы обязательно найдем метод и поправим описание реализующей его функции.

Одни функции реализуют только один метод, другие - сразу несколько связанных методов.

### Параметры

Функции реализуют методы API в адаптированной версии. Поэтому параметры функций отличаются от параметров методов API.

Объясним это на примере функции *getOzonAnalyticsDataFree*.

Открываем [описание метода](https://docs.ozon.ru/api/seller/#operation/AnalyticsAPI_AnalyticsGetData) **Аналитические отчёты → Данные аналитики** в документации API Озон. Параметры метода включают даты начала и конца периода, группировку, фильтры, размер страницы (количество значений в ответе), метрики, отступ и сортировку.

Как правило, для аналитики используется скользящее окно времени - предыдущий день, последние 7 или 30 дней. Чтобы избавить пользователя от высчитывания дат параметр функции использует не саму дату, а количество дней до нее. То есть предыдущий день - это не дд.мм.гггг, а 1 - один день назад от текущей даты. В некоторых случаях период берется включая предыдущий день (параметр 1), в других - включая текущий день (параметр 0). То есть период последних семи дней исключая текущий: первый параметр → 8, второй → 1.

Как правило, группировки по sku и дням достаточно. Из этих данных можно посчитать все остальные группировки. Поэтому третьим параметром по умолчанию указаны именно эти группировки.

Поскольку данные выгружаются для хранения, а цели аналитики могут меняться, фильтры не имеют практического смысла и в функции не используются. По этой же причине выгружаются все возможные метрики. Отдельно выгружаются бесплатные метрики, платные разбиты на две части по причине ограничения ВБ.

Размер страницы выбирается максимальный, так как гугл-сервера обеспечены хорошим каналом связи.

При выгрузке для хранения сортировка не имеет смысла, так как данные в любом случае будут обрабатываться.

Отступ вычисляется автоматически без участия пользователя.

Таким образом, из 8 параметров метода практическое значение для пользователя имеют только начальная и конечная даты.

Второй пример. Функции *getOzonDeliveriesStart* и *getOzonDeliveriesNext* работают совместно. Об этом сказано в описании функций: первая выгружает в служебный лист чекера список доставок и затем вторая функция частями выгружает по этому списку информацию.  В первом параметре указывается за сколько предыдущих дней выгружать доставки. При ежедневной выгрузке данных нет смысла каждый день выгружать данные за год. Но, принимая во внимание технические риски пропуска данных за 1 - 2 дня (API ВБ иногда сбоит), ежедневная выгрузка данных за 3 крайних дня является хорошим решением.

Выполнение гугл-скриптов ограничивается временем 6 минут. Если список доставок очень большой, для его обработки может не хватить 6 минут. Поэтому список делится на части и обрабатывается частями так, чтобы обработка каждой части с запасом укладывалась в 6 минут. Скорость обработки может меняться по разным причинам, поэтому его размер во втором параметре можно корректировать в зависимости от текущих условий.

### Структура данных

Данные в чекере организованы системно.

Данные одного раздела API выгружаются в один датасет. Например, данные из раздела API ВБ **Статистика** выгружаются в датасет **wb\_api\_statistics**, из раздела **Тарифы** в датасет **wb\_api\_tariffs** и т.д. 

Названия соответствующих функциям датасетов указаны в колонке Датасет.

Названия датасетов ВБ соответствуют названиям разделов старой документации API. Чекер не будет приводить названия датасетов в соответствие с новыми обстоятельствами, так как это нанесет ущерб процессам пользоватлей чекера.

Названия таблиц, как правило, соответствуют названиям методов API. Например, данные метода API **Мой Склад → Ассортимент** выгружаются в таблицу **Ассортимент**, из метода **Озон → Финансовые отчёты → Список транзакций** в таблицу **Список транзакций**. Возможны неполные соответствия.



нейминг, даты

##### Дальше

Работа с листом Параметры

##### Назад

[Ежедневная выгрузка ЛК по API](/blog/everyday-upload-turn-on/)
